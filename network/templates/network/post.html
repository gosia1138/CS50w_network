{% load static %}
{% load my_tags %}

<!-- POSTS -->

{% for post in posts %}
    <div class="card">
        <div class="row">
            <div class="col-2">
                <img class='img-fluid m-2 rounded-circle' src="{{post.author.profile.image.url}}" alt="{{post.author}} profile picture">
            </div>
            <div class="col-10">
                <!-- EDIT POST WINDOW -->
                {% if user == post.author %}
                    <div class="card-body" id="textarea_{{ post.id }}" style="display:none;">
                        <form id='form_{{ post.id }}'>
                            <textarea class='form-control' id="content_{{ post.id }}">{{ post.content }}</textarea>
                            <input class="btn btn-primary my-1 btn-sm" type="submit" value="Update">
                        </form>
                    </div>
                {% endif %}
                <!-- POST CONTENT -->
                <div class="card-body" id='post_{{ post.id }}'>
                    <h5 class="card-title"><a href="{% url 'profile' pk=post.author.pk %}">{{post.author}}</a></h5>
                    <h6 class="card-subtitle mb-2 text-muted">{{post.time}}</h6>
                    <!-- POST TEXT -->
                    <p class="card-text" id='card-text_{{ post.id }}'>{{post.content}}</p>
                    <a href="#" class="card-link">Like</a>
                    <span class="badge rounded-pill bg-warning text-dark">{{post.likes_count}}</span>
                    <a href="javascript:void(0)" class="card-link"> Reply</a>
                    {% if user == post.author %}
                        <a href="javascript:void(0)" class="card-link edit_link" id="edit_{{ post.id }}">Edit</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endfor %}

<br>

<!-- PAGINATION -->

{% if page_count > 1 %}
    <nav aria-label="Pagination">
        <ul class="pagination justify-content-center">
            {% if posts.has_previous %}
                <li class="page-item">
                    <a href="?page={{ posts.previous_page_number }}" class="page-link">Previous</a>
                </li>
            {% else %}
                <li class="page-item disabled">
                    <span class="page-link">Previous</span>
                </li>
            {% endif %}
            {% for i in page_count|times %}
                {% if posts.number == i %}
                    <li class="page-item active" aria-current="page">
                        <span class="page-link">{{ i }}</span>
                    </li>
                {% else %}
                    <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
                {% endif %}
            {% endfor %}
            {% if posts.has_next %}
                <li class="page-item">
                    <a href="?page={{ posts.next_page_number }}" class="page-link">Next</a>
                </li>
            {% else %}
                <li class="page-item disabled">
                    <span class="page-link">Next</span>
                </li>
            {% endif %}
        </ul>
    </nav>
{% endif %}
